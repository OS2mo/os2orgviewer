(function(t){function e(e){for(var n,o,i=e[0],u=e[1],c=e[2],d=0,l=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&l.push(s[o][0]),s[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);h&&h(e);while(l.length)l.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var i=r[o];0!==s[i]&&(n=!1)}n&&(a.splice(e--,1),t=u(u.s=r[0]))}return t}var n={},o={app:0},s={app:0},a=[];function i(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-5307d0fc":"a8bd4877"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(t){var e=[],r={"chunk-5307d0fc":1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=new Promise((function(e,r){for(var n="css/"+({}[t]||t)+"."+{"chunk-5307d0fc":"84d695b3"}[t]+".css",s=u.p+n,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===s))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){c=l[i],d=c.getAttribute("data-href");if(d===n||d===s)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||s,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete o[t],h.parentNode.removeChild(h),r(a)},h.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,r){n=s[t]=[e,r]}));e.push(n[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=i(t);var l=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(h);var r=s[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}s[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(r,n,function(e){return t[e]}.bind(null,n));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var h=d;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0e06":function(t,e,r){},"127b":function(t,e,r){},"2c08":function(t,e,r){},"30b3":function(t,e,r){},"386b":function(t,e,r){},"3a7f":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("oc-header",[t.organisations?r("h1",{attrs:{slot:"title",id:"oc-header-title",title:t.organisations[0].name+"s organisation"},slot:"title"},[r("router-link",{attrs:{to:"/"}},[t._v(" "+t._s(t.title)+" ")])],1):t._e(),r("div",{staticClass:"oc-header-actions",attrs:{slot:"actions"},slot:"actions"},[r("router-link",{staticClass:"oc-header-search-link",attrs:{to:"/search",title:"Søg"}},[r("svg",{staticClass:"oc-search-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"18px",height:"18px"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"oc-search-svg-path",attrs:{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}})])])],1)]),r("main",{attrs:{id:"oc-main"}},[r("router-view",{attrs:{id:"tree",name:"tree"}}),r("router-view",{attrs:{id:"organisation",name:"organisation"}}),r("router-view",{attrs:{id:"person",name:"person"}}),r("router-view",{attrs:{id:"search",name:"search"}})],1)],1)},s=[],a=r("96c7"),i={name:"App",components:{OcHeader:a["a"]},data:function(){return{title:"Frederikshavn Kommunes MED-organisation"}},computed:{organisations:function(){return this.$store.getters.getOrganisations}},created:function(){this.$store.dispatch("fetchGlobalOrgs")}},u=i,c=(r("5c0b"),r("2877")),d=Object(c["a"])(u,o,s,!1,null,null,null),l=d.exports,h=r("c0d6"),p=r("8c4f"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"oc-search"},[r("h2",[t._v("Søgning")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"search"},domProps:{value:t.query},on:{input:[function(e){e.target.composing||(t.query=e.target.value)},t.considerSearching]}}),r("input",{attrs:{type:"submit",value:"Søg"}})]),t.person_results&&t.person_results.length>0?r("section",[r("h3",[t._v("Personer")]),r("ul",{staticClass:"oc-search-list"},t._l(t.person_results,(function(e){return r("li",{key:e.uuid},[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.navToPerson(e.uuid)}}},[t._v(t._s(e.name))])])})),0)]):t._e(),t.org_results&&t.org_results.length>0?r("section",[r("h3",[t._v("Afdelinger")]),r("ul",{staticClass:"oc-search-list"},t._l(t.org_results,(function(e){return r("li",{key:e.uuid},[r("router-link",{attrs:{to:"/orgchart?root="+t.root_org_unit_uuid+"&org="+e.uuid+"&orgopen=1&showchildren=1"}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)]):t._e()])},_=[],f=r("903a"),v={data:function(){return{query:null,person_results:null,org_results:null,timeout:null}},computed:{organisation_uuid:function(){return this.$store.getters.getOrganisations[0].uuid},root_org_unit_uuid:function(){return this.$store.getters.getRootOrgUnitUuid}},methods:{debounce:function(t,e){return()=>{const r=this,n=arguments,o=()=>{this.timeout=null,t.apply(r,n)};clearTimeout(this.timeout),this.timeout=setTimeout(o,e)}},considerSearching:function(){this.query.length>2&&this.debounce(this.search,300)()},search:function(){Object(f["a"])(`/service/o/${this.organisation_uuid}/e/?query=${this.query}`).then(t=>{this.person_results=t.items}),Object(f["a"])(`/service/o/${this.organisation_uuid}/ou/?query=${this.query}`).then(t=>{this.org_results=t.items})},navToPerson:function(t){this.$store.dispatch("fetchPersonAssociations",t).then(e=>{!e||e.length<1?alert("Denne person er ikke tilknyttet nogen enhed i organisationen."):this.$router.push({name:"orgchart",query:{root:this.root_org_unit_uuid,org:e[0].org_unit.uuid,person:t,orgopen:1,showchildren:1}})})}}},m=v,b=(r("64e1"),Object(c["a"])(m,g,_,!1,null,null,null)),y=b.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.root_org_uuid?r("div",{staticClass:"oc-chart",class:{"oc-chart-orgopen":1==t.$route.query.orgopen}},[t.root_org_unit&&t.root_org_unit.parent?r("router-link",{staticClass:"oc-chart-root-link btn",attrs:{to:{name:"orgchart",query:{root:t.root_org_unit.parent.uuid,org:t.root_org_uuid,showchildren:1,orgopen:0}}}},[t._v(" Et niveau op ")]):t._e(),r("ul",{staticClass:"oc-branch oc-chart-root-branch"},[r("leaf",{staticClass:"oc-chart-root-leaf",attrs:{uuid:t.root_org_uuid,"show-children":!0,level:0}})],1)],1):t._e()},O=[],$=r("8b81"),C={components:{Leaf:$["a"]},computed:{root_org_uuid:function(){return this.$route.query.root},root_org_unit:function(){return this.$store.getters.getOrgUnit(this.$route.query.root)}},watch:{$route:function(t){this.update(t.query.root)}},methods:{update:function(t){t&&this.$store.dispatch("fetchOrgUnit",t)}},created:function(){this.update(this.$route.query.root),this.$store.dispatch("fetchTree",this.$route.query.org)}},k=C,q=(r("d5de"),Object(c["a"])(k,w,O,!1,null,null,null)),P=q.exports,j=r("a79f"),x=r("f0b4");n["a"].use(p["a"]);const M=new p["a"]({routes:[{path:"/",redirect:{name:"orgchart",query:{root:h["a"].state.organisation.root_org_uuid,org:h["a"].state.organisation.root_org_uuid,showchildren:1}}},{path:"/orgchart",name:"orgchart",components:{tree:P,organisation:j["a"],person:x["a"]}},{path:"/search",name:"search",components:{search:y}}]});var E=M;n["a"].config.productionTip=!1,new n["a"]({store:h["a"],router:E,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),o=r.n(n);o.a},"64e1":function(t,e,r){"use strict";var n=r("b3c5"),o=r.n(n);o.a},"660e":function(t,e,r){},"6bb1":function(t,e,r){},"6beb":function(t,e,r){"use strict";var n=r("3a7f"),o=r.n(n);o.a},"71b0":function(t,e,r){"use strict";var n=r("6bb1"),o=r.n(n);o.a},"7b1f":function(t,e,r){},8245:function(t,e,r){},8508:function(t,e,r){"use strict";var n=r("660e"),o=r.n(n);o.a},8834:function(t,e,r){"use strict";var n=r("2c08"),o=r.n(n);o.a},"8b81":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.node_data?r("li",{staticClass:"oc-node"},[r("div",{staticClass:"oc-node-body",class:{active:t.active_org_uuid===t.node_data.uuid}},[r("div",{staticClass:"oc-node-title"},[r("org-lite",{attrs:{data:t.node_data}}),t.node_data.uuid!==t.root_org_unit_uuid?r("router-link",{staticClass:"oc-node-focus-btn btn",attrs:{to:"/orgchart?root="+t.node_data.uuid+"&org="+t.node_data.uuid+"&showchildren=1",title:"Vis kun "+t.node_data.name}},[r("svg",{staticClass:"svg-focus",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}})])]):t._e()],1),t.node_data.child_count?r("button",{staticClass:"oc-node-expand-btn btn",class:t.branch_open?"close":"open",attrs:{type:"button",title:t.branch_open?"Skjul "+t.node_data.child_count+" underenheder":"Vis "+t.node_data.child_count+" underenheder"},on:{click:t.toggleBranch}},[r("svg",{staticClass:"svg-toggle",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}})]),t._v(" "+t._s(t.node_data.child_count)+" ")]):t._e()]),t.branch_open?r("branch",{class:{"oc-chart-root-branch":t.root_org_unit_uuid===t.node_data.uuid},attrs:{uuid:t.uuid,level:t.level+1}}):t._e()],1):t._e()},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-link",{staticClass:"oc-org-link",attrs:{to:{name:"orgchart",query:{root:t.root_org_uuid,org:t.data.uuid,orgopen:1,showchildren:1}},id:"orgunit-"+t.data.uuid,title:"Vis udvidet information"}},[t._v(" "+t._s(t.data.name)+" ")])},a=[],i={props:["data"],computed:{root_org_uuid:function(){return this.$route.query.root}}},u=i,c=(r("8508"),r("2877")),d=Object(c["a"])(u,s,a,!1,null,null,null),l=d.exports,h=r("a79f"),p={components:{Branch:()=>r.e("chunk-5307d0fc").then(r.bind(null,"691a")),OrgLite:l,Org:h["a"]},data:function(){return{branch_open:!1}},props:{uuid:String,showChildren:{type:Boolean,default:!1},level:Number},computed:{node_data:function(){return this.$store.getters.getOrgUnit(this.uuid)},root_org_unit_uuid:function(){return this.$route.query.root},active_org_uuid:function(){return this.$route.query.org},query_showchildren_applies:function(){return this.$route.query.org===this.uuid&&1==this.$route.query.showchildren}},watch:{showChildren:function(t){this.update(t)},node_data:function(t){this.update(this.showChildren)}},methods:{update:function(t){(t||this.query_showchildren_applies)&&(this.$store.dispatch("checkOrgChildren",this.uuid),this.branch_open=!0)},toggleBranch:function(){this.branch_open=!this.branch_open;let t={name:"orgchart",query:{root:this.root_org_unit_uuid,org:this.node_data.uuid,orgopen:0,showchildren:this.branch_open?1:0}};this.$router.push(t)}},created:function(){this.update(this.showChildren)}},g=p,_=(r("cf48"),Object(c["a"])(g,n,o,!1,null,null,null));e["a"]=_.exports},"903a":function(t,e,r){"use strict";r("6d93"),r("7b1f");const n=function(){const t=document.createElement("div");t.id="spinner",t.role="alert";const e=function(){return!!document.getElementById("spinner")},r=function(){e()||document.body.appendChild(t)},n=function(){e()&&document.body.removeChild(t)};return{spinOn:r,spinOff:n}};var o=n();let s=[];function a(){s.push(!0),s.length>0&&o.spinOn()}function i(){s.pop(),s.length<1&&o.spinOff()}function u(t){return a(),fetch("http://192.168.1.225:5000"+t).then(t=>t.json()).then(t=>(i(),t)).catch(t=>(console.log(t),i(),t))}e["a"]=u},"96c7":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"oc-header"},[t._t("title"),t._t("actions")],2)},o=[],s=(r("dead"),r("2877")),a={},i=Object(s["a"])(a,n,o,!1,null,null,null);e["a"]=i.exports},"9c0c":function(t,e,r){},"9dd5":function(t,e,r){"use strict";var n=r("0e06"),o=r.n(n);o.a},a79f:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.org_visible&&t.org_data?r("article",{staticClass:"oc-org"},[r("oc-header",[r("h2",{attrs:{slot:"title"},slot:"title"},[r("router-link",{attrs:{id:"orgtitle",to:{name:"orgchart",query:{root:t.root_org_uuid,org:t.org_data.uuid,orgopen:0,showchildren:1}},title:"Luk visning af "+t.org_data.name}},[r("svg",{staticClass:"svg-back",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}})]),r("span",{staticClass:"oc-org-title"},[t._v(t._s(t.org_data.name))]),r("svg",{staticClass:"svg-close",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])],1)]),r("div",{staticClass:"oc-org-body"},[r("person-list",{attrs:{uuid:t.org_data.uuid}})],1)],1):t._e()},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.people?r("ul",{staticClass:"people-list"},t._l(t.people,(function(t){return r("li",{key:t.uuid},[r("person-lite",{attrs:{data:t}})],1)})),0):t._e()},a=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.data?r("div",{staticClass:"oc-person-list-item"},[t.data.person?r("dl",[r("dt",[t._v(t._s(t.data.association_type.name))]),r("dd",[r("router-link",{staticClass:"oc-person-open",attrs:{to:{name:"orgchart",query:{root:t.root_org_uuid,org:t.data.org_unit.uuid,person:t.data.person.uuid,orgopen:1,showchildren:1}}}},[t._v(" "+t._s(t.data.person.name)+" ")])],1)]):t._e()]):t._e()},u=[],c={props:["data"],computed:{root_org_uuid:function(){return this.$store.getters.getRootOrgUnitUuid}}},d=c,l=(r("6beb"),r("2877")),h=Object(l["a"])(d,i,u,!1,null,null,null),p=h.exports,g=r("f0b4"),_={components:{PersonLite:p,Person:g["a"]},props:["uuid"],computed:{people:function(){return this.$store.getters.getPersons}},watch:{uuid:function(t){this.$store.dispatch("fetchAssociatedPeople",t)}},created:function(){this.$store.dispatch("fetchAssociatedPeople",this.uuid)}},f=_,v=(r("9dd5"),Object(l["a"])(f,s,a,!1,null,null,null)),m=v.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.managers?r("dl",{staticClass:"oc-manager-item"},[t._l(t.managers,(function(e){return[r("dt",{key:e.uuid},[t._v(t._s(e.manager_type.name))]),r("dd",{key:e.person.uuid},[r("router-link",{attrs:{to:{name:"orgchart",query:{root:t.root_org_uuid,org:t.uuid,orgopen:1,person:e.person.uuid}}}},[t._v(" "+t._s(e.person.name)+" ")])],1)]}))],2):t._e()},y=[],w={props:["uuid"],computed:{managers:function(){return this.$store.getters.getManagers},root_org_uuid:function(){return this.$store.getters.getRootOrgUnitUuid}},watch:{uuid:function(t){this.$store.dispatch("fetchManagers",t)}},created:function(){this.$store.dispatch("fetchManagers",this.uuid)}},O=w,$=(r("8834"),Object(l["a"])(O,b,y,!1,null,null,null)),C=$.exports,k=r("96c7"),q=(r("c0d6"),{components:{PersonList:m,Managers:C,OcHeader:k["a"]},computed:{org_visible:function(){return 1==this.$route.query.orgopen},org_data:function(){return this.$store.getters.getOrgUnit(this.$route.query.org)},root_org_uuid:function(){return this.$route.query.root}},watch:{$route:function(t){this.update(t.query.org)}},methods:{update:function(t){t&&this.$store.dispatch("fetchOrgUnit",t)}},created:function(){this.update(this.$route.query.org)}}),P=q,j=(r("71b0"),Object(l["a"])(P,n,o,!1,null,null,null));e["a"]=j.exports},b3c5:function(t,e,r){},c0d6:function(t,e,r){"use strict";var n=r("2b0e"),o=r("2f62"),s=r("903a");const a={persons:{},managers:null},i={getPersons:t=>t.persons,getPerson:t=>e=>t.persons[e],getManagers:t=>t.managers},u={setPersons:(t,e)=>{t.persons=e},updatePerson:(t,e)=>{if(t.persons[e.uuid]){let r=Object.assign({},e,t.persons[e.uuid]);n["a"].set(t.persons,e.uuid,r)}else n["a"].set(t.persons,e.uuid,e)},setManagers:(t,e)=>{t.managers=e}},c={fetchAssociatedPeople:({commit:t},e)=>{t("setPersons",{}),Object(s["a"])(`/service/ou/${e}/details/association`).then(e=>{for(let r in e)t("updatePerson",e[r])})},fetchPerson:({state:t,commit:e,dispatch:r},n)=>t.persons[n]&&t.persons[n].address_data?t.persons[n]:r("fetchPersonByHttp",n).then(t=>(r("fetchPersonAddresses",n).then(o=>{t.address_data=o,r("fetchPersonAssociations",n).then(r=>{t.association_data=r,e("updatePerson",t)})}),t)),fetchPersonByHttp:({},t)=>Object(s["a"])(`/service/e/${t}/`).then(t=>t),fetchPersonAddresses:({},t)=>Object(s["a"])(`/service/e/${t}/details/address`).then(t=>t),fetchPersonAssociations:({},t)=>Object(s["a"])(`/service/e/${t}/details/association`).then(t=>t),fetchManagers:({commit:t},e)=>{Object(s["a"])(`/service/ou/${e}/details/manager`).then(e=>{t("setManagers",e)})}};var d={state:a,getters:i,mutations:u,actions:c};const l=function(t,e){for(let r in t)t[r].parent_uuid=e,t[r].children?(t[r].showchildren=!0,l(t[r].children,t[r].uuid)):t[r].showchildren=!1,g.updateNode(h,t[r])},h={graph:{},root_org_uuid:"f06ee470-9f17-566f-acbe-e938112d46d9",global_organisations:null},p={getGraph:t=>t.graph,getOrgUnit:t=>e=>t.graph[e],getChildren:t=>e=>{let r=[];for(let n in t.graph[e].child_list)r.push(t.graph[t.graph[e].child_list[n]]);return r},getRootOrgUnitUuid:t=>t.root_org_uuid,getOrganisations:t=>t.global_organisations},g={updateNode:(t,e)=>{if(t.graph[e.uuid]){let r=Object.assign({},t.graph[e.uuid],e);n["a"].set(t.graph,e.uuid,r)}else n["a"].set(t.graph,e.uuid,e)},setRootOrgUuid:(t,e)=>{t.root_org_uuid=e},setOrganisations:(t,e)=>{t.global_organisations=e}},_={checkOrgChildren:({state:t,dispatch:e},r)=>{let n=t.graph[r];n&&!n.child_list&&e("fetchOrgUnitChildren",r)},fetchGlobalOrgs:({commit:t})=>Object(s["a"])("/service/o/").then(e=>(t("setOrganisations",e),e)),fetchTree:({},t)=>Object(s["a"])("/service/ou/ancestor-tree?uuid="+t).then(t=>(l(t,!1),t)),fetchOrgUnit:({commit:t,dispatch:e},r)=>{h.graph[r]||Object(s["a"])(`/service/ou/${r}/`).then(n=>{t("updateNode",n),e("fetchOrgUnitChildren",r)})},fetchOrgUnitChildren:({commit:t,state:e},r)=>{Object(s["a"])(`/service/ou/${r}/children`).then(n=>{let o=e.graph[r];o.child_list||(o.child_list=[]);for(let e in n){t("updateNode",n[e]);let r=o.child_list.findIndex((function(t){return t===n[e].uuid}));r<0&&o.child_list.push(n[e].uuid)}o.child_count=o.child_list.length,t("updateNode",o)})}};var f={state:h,getters:p,mutations:g,actions:_};n["a"].use(o["a"]);e["a"]=new o["a"].Store({modules:{person:d,organisation:f}})},c55a:function(t,e,r){"use strict";var n=r("386b"),o=r.n(n);o.a},cf48:function(t,e,r){"use strict";var n=r("30b3"),o=r.n(n);o.a},d5de:function(t,e,r){"use strict";var n=r("8245"),o=r.n(n);o.a},dead:function(t,e,r){"use strict";var n=r("127b"),o=r.n(n);o.a},f0b4:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.person_data?r("article",{staticClass:"oc-person"},[r("oc-header",[r("h3",{attrs:{slot:"title"},slot:"title"},[r("router-link",{attrs:{to:{name:"orgchart",query:{root:t.root_org_uuid,org:t.org_unit_uuid,orgopen:1,showchildren:1}},title:"Tilbage til "+t.person_data.association_data[0].org_unit.name}},[r("svg",{staticClass:"svg-back",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}})]),r("span",{staticClass:"oc-person-title"},[t._v(t._s(t.person_data.name))]),r("svg",{staticClass:"svg-close",attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{staticClass:"svg-path",attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])],1)]),r("dl",{staticClass:"oc-person-body"},[r("dt",[t._v("Navn")]),r("dd",[t._v(t._s(t.person_data.name))]),r("dt",[t._v("Tilknytning")]),r("dd",[t._v(t._s(t.person_data.association_data[0].association_type.name))]),t.person_data.address_data?[t._l(t.person_data.address_data,(function(e){return[r("dt",{key:e.address_type.uuid},[t._v(t._s(e.address_type.name))]),r("dd",{key:e.uuid},["Email"===e.address_type.name?r("a",{attrs:{href:"mailto:"+e.name}},[t._v(" "+t._s(e.name)+" ")]):r("span",[t._v(" "+t._s(e.name)+" ")])])]}))]:t._e()],2)],1):t._e()},o=[],s=r("96c7"),a={components:{OcHeader:s["a"]},computed:{person_data:function(){return this.$store.getters.getPerson(this.$route.query.person)},org_unit_uuid:function(){return this.$route.query.org},root_org_uuid:function(){return this.$route.query.root}},watch:{$route:function(t){this.update(t.query.person)}},methods:{update:function(t){t&&this.$store.dispatch("fetchPerson",t)}},created:function(){this.update(this.$route.query.person)}},i=a,u=(r("c55a"),r("2877")),c=Object(u["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports}});
//# sourceMappingURL=app.91b4f767.js.map